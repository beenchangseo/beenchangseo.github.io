2:I[5613,[],""]
4:I[1778,[],""]
5:I[7629,["699","static/chunks/8e1d74a4-1e017a85df66f066.js","792","static/chunks/792-141a1b4a1ae1a295.js","185","static/chunks/app/layout-c3f8215b35e90bdf.js"],""]
6:I[102,["699","static/chunks/8e1d74a4-1e017a85df66f066.js","792","static/chunks/792-141a1b4a1ae1a295.js","185","static/chunks/app/layout-c3f8215b35e90bdf.js"],""]
3:["slug","kube_nginx_websocket_route","d"]
0:["PvbW5-5j-N8tUdvqvbP8I",[[["",{"children":["blog",{"children":["post",{"children":[["slug","kube_nginx_websocket_route","d"],{"children":["__PAGE__?{\"slug\":\"kube_nginx_websocket_route\"}",{}]}]}]}]},"$undefined","$undefined",true],["",{"children":["blog",{"children":["post",{"children":[["slug","kube_nginx_websocket_route","d"],{"children":["__PAGE__",{},["$L1",["$","section",null,{"children":["$","div",null,{"className":"mt-10 pb-10 border-b-2 mb-10 prose dark:prose-invert","children":[["$","h1",null,{"className":"mb-16 font-bold text-2xl sm:text-4xl font-mono","children":"쿠버네티스 Pod 외부접속 with nginx, websocket"}],[["$","h1",null,{"children":"이 포스팅은 아직 작성 중 입니다. (WIP)"}],"\n",["$","h2",null,{"children":"쿠버네티스 Pod 외부접속 with nginx, websocket"}],"\n",["$","p",null,{"children":"clusterIP로 설정한 pod들과 host의 앱 nginx로 통신하기"}],"\n",["$","p",null,{"children":"clusterIP로 설정한 pod는 쿠버네티스의 내부 사설 아이피를 할당 받게된다."}],"\n",["$","p",null,{"children":"host에서 해당 pod로 접근하려면 NodePort로 변경해야하지만 ClusterIP를 유지하면서 Nginx로 proxy를 해보았다."}],"\n",["$","h2",null,{"children":"Service 생성"}],"\n",["$","p",null,{"children":"서비스는 2개를 생성한다. (NodePort와 ClusterIP)"}],"\n",["$","p",null,{"children":"NodePort는 호스트와 통신하기위한 Nginx pod의 서비스, ClusterIP는 통신의 최종 도착지인 다른 pod 서비스이다."}],"\n",["$","figure",null,{"data-rehype-pretty-code-figure":"","children":["$","pre",null,{"style":{"backgroundColor":"#24292e","color":"#e1e4e8"},"tabIndex":"0","data-language":"YAML","data-theme":"github-dark","children":["$","code",null,{"data-language":"YAML","data-theme":"github-dark","style":{"display":"grid"},"children":[["$","span",null,{"data-line":"","children":["$","span",null,{"children":"# NodePort Service"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"apiVersion: v1"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"kind: Service"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"metadata:  "}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"  name: nginx-service"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"spec:"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"  selector:    "}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"    app: nginx"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"  type: NodePort"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"  ports:  "}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"  - name: http"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"    port: 80"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"    targetPort: 80"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"    nodePort: 32088"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"    protocol: TCP"}]}]]}]}]}],"\n",["$","figure",null,{"data-rehype-pretty-code-figure":"","children":["$","pre",null,{"style":{"backgroundColor":"#24292e","color":"#e1e4e8"},"tabIndex":"0","data-language":"YAML","data-theme":"github-dark","children":["$","code",null,{"data-language":"YAML","data-theme":"github-dark","style":{"display":"grid"},"children":[["$","span",null,{"data-line":"","children":["$","span",null,{"children":"# ClusterIP Service"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"kind: Service"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"apiVersion: v1"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"metadata:"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"  namespace: default"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"  name: my-application-service"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"spec:"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"  selector:"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"    app: my-application"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"  type: ClusterIP"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"  clusterIP: None"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"  ports:"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"  - port: 32088"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"    targetPort: 32088"}]}]]}]}]}],"\n",["$","h2",null,{"children":"Nginx 설정"}],"\n",["$","p",null,{"children":"nginx pod를 생성해보자"}],"\n",["$","p",null,{"children":"nginx의 설정 파일(sites.conf, nginx.conf. mime.types)들은 따로 생성하여 볼륨 마운트 시켰다"}],"\n",["$","figure",null,{"data-rehype-pretty-code-figure":"","children":["$","pre",null,{"style":{"backgroundColor":"#24292e","color":"#e1e4e8"},"tabIndex":"0","data-language":"YAML","data-theme":"github-dark","children":["$","code",null,{"data-language":"YAML","data-theme":"github-dark","style":{"display":"grid"},"children":[["$","span",null,{"data-line":"","children":["$","span",null,{"children":"# Nginx Deployment"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"apiVersion: apps/v1"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"kind: Deployment"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"metadata:"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"  name: nginx-deployment"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"  labels:"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"    app: nginx"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"spec:"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"  replicas: 1"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"  selector:"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"    matchLabels:"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"      app: nginx"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"  template:"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"    metadata:"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"      labels:"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"        app: nginx"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"    spec:"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"      containers:"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"      - name: nginx"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"        image: nginx:1.14.2"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"        ports:"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"        - containerPort: 80"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"        volumeMounts:"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"        - name: config"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"          mountPath: /etc/nginx"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"      volumes:"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"      - name: config"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"        hostPath:"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"            path: /Users/beenchangseo/deploy/k8s/nginx/config"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"            type: Directory"}]}]]}]}]}],"\n",["$","h3",null,{"children":"sites.conf"}],"\n",["$","p",null,{"children":"내가 테스트 할 호스트 어플리케이션은 http 서버이고 ClusterIP 서비스에 올려놓은 pod는 websocket 서버이다."}],"\n",["$","p",null,{"children":"흐름은 아래 구조와 같다"}],"\n",["$","blockquote",null,{"children":["\n",["$","p",null,{"children":"http server -> nginx -> websocket server pod"}],"\n"]}],"\n",["$","p",null,{"children":"nginx를 웹소켓 proxy로 사용할 수 있도록 아래와 같이 sites.conf를 설정 해준다."}],"\n",["$","figure",null,{"data-rehype-pretty-code-figure":"","children":["$","pre",null,{"style":{"backgroundColor":"#24292e","color":"#e1e4e8"},"tabIndex":"0","data-language":"bash","data-theme":"github-dark","children":["$","code",null,{"data-language":"bash","data-theme":"github-dark","style":{"display":"grid"},"children":[["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#6A737D"},"children":"# sites.conf"}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#B392F0"},"children":"map"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":" $http_upgrade $connection_upgrade "}],["$","span",null,{"style":{"color":"#9ECBFF"},"children":"{"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#B392F0"},"children":"    default"}],["$","span",null,{"style":{"color":"#9ECBFF"},"children":" upgrade"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#B392F0"},"children":"    ''"}],["$","span",null,{"style":{"color":"#9ECBFF"},"children":" close"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#E1E4E8"},"children":"}"}]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#B392F0"},"children":"server"}],["$","span",null,{"style":{"color":"#9ECBFF"},"children":" {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#B392F0"},"children":"\tlisten"}],["$","span",null,{"style":{"color":"#79B8FF"},"children":" 80"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#B392F0"},"children":"\tserver_name"}],["$","span",null,{"style":{"color":"#9ECBFF"},"children":" marketdata"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#B392F0"},"children":"\tlocation"}],["$","span",null,{"style":{"color":"#9ECBFF"},"children":" /my-application/ws"}],["$","span",null,{"style":{"color":"#9ECBFF"},"children":" {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#B392F0"},"children":"        proxy_pass"}],["$","span",null,{"style":{"color":"#9ECBFF"},"children":" http://my-application.default.svc.cluster.local:32088"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#B392F0"},"children":"        proxy_http_version"}],["$","span",null,{"style":{"color":"#79B8FF"},"children":" 1.1"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#B392F0"},"children":"        proxy_set_header"}],["$","span",null,{"style":{"color":"#9ECBFF"},"children":" Upgrade"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":" $http_upgrade;"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#B392F0"},"children":"        proxy_set_header"}],["$","span",null,{"style":{"color":"#9ECBFF"},"children":" Connection"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":" $connection_upgrade;"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#E1E4E8"},"children":"    }"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#E1E4E8"},"children":"}"}]}]]}]}]}],"\n",["$","h3",null,{"children":"nginx.conf"}],"\n",["$","p",null,{"children":"nginx.conf 설정은 log_format만 수정함"}],"\n",["$","figure",null,{"data-rehype-pretty-code-figure":"","children":["$","pre",null,{"style":{"backgroundColor":"#24292e","color":"#e1e4e8"},"tabIndex":"0","data-language":"bash","data-theme":"github-dark","children":["$","code",null,{"data-language":"bash","data-theme":"github-dark","style":{"display":"grid"},"children":[["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#6A737D"},"children":"# nginx.conf"}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#B392F0"},"children":"user"}],["$","span",null,{"style":{"color":"#9ECBFF"},"children":" nginx"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#B392F0"},"children":"worker_processes"}],["$","span",null,{"style":{"color":"#9ECBFF"},"children":" auto"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#B392F0"},"children":"worker_cpu_affinity"}],["$","span",null,{"style":{"color":"#9ECBFF"},"children":" auto"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#B392F0"},"children":"worker_rlimit_nofile"}],["$","span",null,{"style":{"color":"#79B8FF"},"children":" 65535"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#B392F0"},"children":"pid"}],["$","span",null,{"style":{"color":"#9ECBFF"},"children":" /run/nginx.pid"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#B392F0"},"children":"events"}],["$","span",null,{"style":{"color":"#9ECBFF"},"children":" {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#B392F0"},"children":"    worker_connections"}],["$","span",null,{"style":{"color":"#79B8FF"},"children":" 1024"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#E1E4E8"},"children":"}"}]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#B392F0"},"children":"http"}],["$","span",null,{"style":{"color":"#9ECBFF"},"children":" {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#B392F0"},"children":"    include"}],["$","span",null,{"style":{"color":"#9ECBFF"},"children":" /etc/nginx/mime.types"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#B392F0"},"children":"    default_type"}],["$","span",null,{"style":{"color":"#9ECBFF"},"children":" application/octet-stream"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#B392F0"},"children":"    log_format"}],["$","span",null,{"style":{"color":"#9ECBFF"},"children":" compression"}],["$","span",null,{"style":{"color":"#9ECBFF"},"children":" '$remote_addr - $remote_user [$time_local] '"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#B392F0"},"children":"                        '\"$request\" $status $body_bytes_sent '"}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#B392F0"},"children":"                        '\"$http_referer\" \"$http_user_agent\" \"$gzip_ratio\"'"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#B392F0"},"children":"    access_log"}],["$","span",null,{"style":{"color":"#9ECBFF"},"children":" /var/log/nginx/access.log"}],["$","span",null,{"style":{"color":"#9ECBFF"},"children":" compression"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#E1E4E8"},"children":"    "}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#B392F0"},"children":"    error_log"}],["$","span",null,{"style":{"color":"#9ECBFF"},"children":" /var/log/nginx/error.log"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#B392F0"},"children":"    include"}],["$","span",null,{"style":{"color":"#9ECBFF"},"children":" ./sites.conf"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#E1E4E8"},"children":"}"}]}],"\n",["$","span",null,{"data-line":"","children":" "}]]}]}]}],"\n",["$","h3",null,{"children":"mime.types"}],"\n",["$","p",null,{"children":"mime.types는 대충 인터넷에서 긁어왔다."}],"\n",["$","figure",null,{"data-rehype-pretty-code-figure":"","children":["$","pre",null,{"style":{"backgroundColor":"#24292e","color":"#e1e4e8"},"tabIndex":"0","data-language":"bash","data-theme":"github-dark","children":["$","code",null,{"data-language":"bash","data-theme":"github-dark","style":{"display":"grid"},"children":[["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#6A737D"},"children":"# mime.types"}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#B392F0"},"children":"types"}],["$","span",null,{"style":{"color":"#9ECBFF"},"children":" {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#B392F0"},"children":"    text/html"}],["$","span",null,{"style":{"color":"#9ECBFF"},"children":"                             html"}],["$","span",null,{"style":{"color":"#9ECBFF"},"children":" htm"}],["$","span",null,{"style":{"color":"#9ECBFF"},"children":" shtml"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#B392F0"},"children":"    text/css"}],["$","span",null,{"style":{"color":"#9ECBFF"},"children":"                              css"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#B392F0"},"children":"    text/xml"}],["$","span",null,{"style":{"color":"#9ECBFF"},"children":"                              xml"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#B392F0"},"children":"    image/gif"}],["$","span",null,{"style":{"color":"#9ECBFF"},"children":"                             gif"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#B392F0"},"children":"    image/jpeg"}],["$","span",null,{"style":{"color":"#9ECBFF"},"children":"                            jpeg"}],["$","span",null,{"style":{"color":"#9ECBFF"},"children":" jpg"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#B392F0"},"children":"    application/javascript"}],["$","span",null,{"style":{"color":"#9ECBFF"},"children":"                js"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#79B8FF"},"children":"    ..."}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#79B8FF"},"children":"    ..."}],["$","span",null,{"style":{"color":"#9ECBFF"},"children":" 중략"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#79B8FF"},"children":"    ..."}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#B392F0"},"children":"    video/x-msvideo"}],["$","span",null,{"style":{"color":"#9ECBFF"},"children":"                       avi"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#E1E4E8"},"children":"}"}]}]]}]}]}],"\n",["$","h3",null,{"children":"nginx pod에 올리기"}],"\n",["$","p",null,{"children":"쿠버네티스에 nginx pod를 생성한다."}],"\n",["$","pre",null,{"children":["$","code",null,{}]}],"\n",["$","p",null,{"children":"로그가 잘 나오는지도 확인 해보자"}],"\n",["$","pre",null,{"children":["$","code",null,{}]}],"\n",["$","h3",null,{"children":"websocket server pod 올리기"}],"\n",["$","p",null,{"children":"실험용 테스트 웹 소켓 서버 pod를 생성해보자"}],"\n",["$","figure",null,{"data-rehype-pretty-code-figure":"","children":["$","pre",null,{"style":{"backgroundColor":"#24292e","color":"#e1e4e8"},"tabIndex":"0","data-language":"typescript","data-theme":"github-dark","children":["$","code",null,{"data-language":"typescript","data-theme":"github-dark","style":{"display":"grid"},"children":["$","span",null,{"data-line":"","children":" "}]}]}]}],"\n",["$","h3",null,{}]]]}]}],null]]},["$","$L2",null,{"parallelRouterKey":"children","segmentPath":["children","blog","children","post","children","$3","children"],"loading":"$undefined","loadingStyles":"$undefined","loadingScripts":"$undefined","hasLoading":false,"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L4",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","styles":null}]]},["$","$L2",null,{"parallelRouterKey":"children","segmentPath":["children","blog","children","post","children"],"loading":"$undefined","loadingStyles":"$undefined","loadingScripts":"$undefined","hasLoading":false,"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L4",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","styles":null}]]},["$","$L2",null,{"parallelRouterKey":"children","segmentPath":["children","blog","children"],"loading":"$undefined","loadingStyles":"$undefined","loadingScripts":"$undefined","hasLoading":false,"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L4",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","styles":null}]]},[null,["$","html",null,{"lang":"en","className":"__className_aaf875","suppressHydrationWarning":true,"children":["$","body",null,{"children":["$","$L5",null,{"children":[["$","$L6",null,{}],["$","main",null,{"className":"transition duration-500 bg-white dark:bg-[#111111] text-black dark:text-white","children":["$","div",null,{"className":"max-w-screen-md flex flex-col px-10 m-auto","children":["$","$L2",null,{"parallelRouterKey":"children","segmentPath":["children"],"loading":"$undefined","loadingStyles":"$undefined","loadingScripts":"$undefined","hasLoading":false,"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L4",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":[["$","title",null,{"children":"404: This page could not be found."}],["$","div",null,{"style":{"fontFamily":"system-ui,\"Segoe UI\",Roboto,Helvetica,Arial,sans-serif,\"Apple Color Emoji\",\"Segoe UI Emoji\"","height":"100vh","textAlign":"center","display":"flex","flexDirection":"column","alignItems":"center","justifyContent":"center"},"children":["$","div",null,{"children":[["$","style",null,{"dangerouslySetInnerHTML":{"__html":"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}"}}],["$","h1",null,{"className":"next-error-h1","style":{"display":"inline-block","margin":"0 20px 0 0","padding":"0 23px 0 0","fontSize":24,"fontWeight":500,"verticalAlign":"top","lineHeight":"49px"},"children":"404"}],["$","div",null,{"style":{"display":"inline-block"},"children":["$","h2",null,{"style":{"fontSize":14,"fontWeight":400,"lineHeight":"49px","margin":0},"children":"This page could not be found."}]}]]}]}]],"notFoundStyles":[],"styles":null}]}]}],["$","footer",null,{"className":"w-full font-mono flex flex-col justify-center items-center pt-10 pb-6 transition duration-500 bg-white dark:bg-[#111111] dark:text-white text-black","children":[["$","div",null,{"className":"flex justify-center gap-4 items-center pt-4 border-t-2 w-36","children":[["$","a",null,{"href":"beenchangseo@gmail.com","className":"hover:scale-110 transition-transform duration-500 hover:text-green-500 hover:fill-green-500 dark:fill-white dark:hover:fill-green-500","children":["$","svg",null,{"xmlns":"http://www.w3.org/2000/svg","width":"24","height":"24","viewBox":"0 0 24 24","children":["$","path",null,{"d":"M12 .02c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm6.99 6.98l-6.99 5.666-6.991-5.666h13.981zm.01 10h-14v-8.505l7 5.673 7-5.672v8.504z"}]}]}],["$","a",null,{"href":"https://github.com/beenchangseo","className":"hover:scale-110 transition-transform duration-500 hover:text-green-500 hover:fill-green-500 dark:fill-white dark:hover:fill-green-500","children":["$","svg",null,{"xmlns":"http://www.w3.org/2000/svg","width":"24","height":"24","viewBox":"0 0 24 24","children":["$","path",null,{"d":"M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"}]}]}]]}],["$","div",null,{"className":"text-sm mt-2","children":"Copyright © 2024 Changbeen seo"}],["$","div",null,{"className":"text-xs mt-2","children":"beenchangseo"}]]}]]}]}]}],null]],[[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/8ae19ecead919bb5.css","precedence":"next","crossOrigin":""}]],"$L7"]]]]
7:[["$","meta","0",{"name":"viewport","content":"width=device-width, initial-scale=1"}],["$","meta","1",{"charSet":"utf-8"}],["$","title","2",{"children":"쿠버네티스 Pod 외부접속 with nginx, websocket"}],["$","meta","3",{"name":"description","content":"쿠버네티스 nginx로 웹 소켓 외부접속 요청을 다른 pod로 라우팅 시키는 포스팅입니다."}],["$","meta","4",{"name":"keywords","content":"kubernetes nginx, kubernetes nodeport, kubernetes 외부접속, nginx sites.conf, kubernetes nodeport extanal, kubernetes clusterip 외부접속, kubernetes clusterip extanal"}],["$","meta","5",{"property":"og:title","content":"쿠버네티스 Pod 외부접속 with nginx, websocket"}],["$","meta","6",{"property":"og:description","content":"쿠버네티스 nginx로 웹 소켓 외부접속 요청을 다른 pod로 라우팅 시키는 포스팅입니다."}],["$","meta","7",{"property":"og:url","content":"https://beenchangseo.github.io/kube_nginx_websocket_route"}],["$","meta","8",{"property":"og:site_name","content":"Beenchangseo Blog"}],["$","meta","9",{"property":"og:locale","content":"ko_KR"}],["$","meta","10",{"property":"og:type","content":"article"}],["$","meta","11",{"property":"article:tag","content":"kubernetes nginx"}],["$","meta","12",{"property":"article:tag","content":"kubernetes nodeport"}],["$","meta","13",{"property":"article:tag","content":"kubernetes 외부접속"}],["$","meta","14",{"property":"article:tag","content":"nginx sites.conf"}],["$","meta","15",{"property":"article:tag","content":"kubernetes nodeport extanal"}],["$","meta","16",{"property":"article:tag","content":"kubernetes clusterip 외부접속"}],["$","meta","17",{"property":"article:tag","content":"kubernetes clusterip extanal"}],["$","meta","18",{"name":"twitter:card","content":"summary"}],["$","meta","19",{"name":"twitter:creator","content":"beenchangseo"}],["$","meta","20",{"name":"twitter:title","content":"쿠버네티스 Pod 외부접속 with nginx, websocket"}],["$","meta","21",{"name":"twitter:description","content":"쿠버네티스 nginx로 웹 소켓 외부접속 요청을 다른 pod로 라우팅 시키는 포스팅입니다."}],["$","meta","22",{"name":"next-size-adjust"}]]
1:null
