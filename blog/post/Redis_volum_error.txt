2:I[231,["231","static/chunks/231-261bb995fbdfbb4b.js","173","static/chunks/173-96223d64304995f5.js","811","static/chunks/app/blog/post/%5Bslug%5D/page-f3335040e15dfb25.js"],""]
3:I[8173,["231","static/chunks/231-261bb995fbdfbb4b.js","173","static/chunks/173-96223d64304995f5.js","811","static/chunks/app/blog/post/%5Bslug%5D/page-f3335040e15dfb25.js"],"Image"]
4:I[9275,[],""]
6:I[1343,[],""]
7:I[7135,["67","static/chunks/aa7babf8-0b3459b02fbce46a.js","699","static/chunks/8e1d74a4-d5e5f0108d572a08.js","231","static/chunks/231-261bb995fbdfbb4b.js","342","static/chunks/342-8161a969a7342dcc.js","185","static/chunks/app/layout-ab167d93fad18627.js"],"AuthProvider"]
8:I[5957,["67","static/chunks/aa7babf8-0b3459b02fbce46a.js","699","static/chunks/8e1d74a4-d5e5f0108d572a08.js","231","static/chunks/231-261bb995fbdfbb4b.js","342","static/chunks/342-8161a969a7342dcc.js","185","static/chunks/app/layout-ab167d93fad18627.js"],"default"]
9:"$Sreact.suspense"
a:I[4331,["67","static/chunks/aa7babf8-0b3459b02fbce46a.js","699","static/chunks/8e1d74a4-d5e5f0108d572a08.js","231","static/chunks/231-261bb995fbdfbb4b.js","342","static/chunks/342-8161a969a7342dcc.js","185","static/chunks/app/layout-ab167d93fad18627.js"],"default"]
5:["slug","Redis_volum_error","d"]
0:["GtevJgmrNdmxz8CIx6do6",[[["",{"children":["blog",{"children":["post",{"children":[["slug","Redis_volum_error","d"],{"children":["__PAGE__?{\"slug\":\"Redis_volum_error\"}",{}]}]}]}]},"$undefined","$undefined",true],["",{"children":["blog",{"children":["post",{"children":[["slug","Redis_volum_error","d"],{"children":["__PAGE__",{},[["$L1",["$","section",null,{"children":["$","div",null,{"className":"mt-10 pb-10 border-b-2 mb-10 prose dark:prose-invert","children":[["$","h1",null,{"className":"mb-8 font-bold text-2xl sm:text-4xl font-mono","children":"Redis EXECABORT Transaction discarded because of previous errors 에러"}],["$","div",null,{"className":"flex-auto mb-4","children":[["$","button","0",{"className":"h-8 px-3 m-1 text-xs border-2 border-gray-700 dark:border-gray-300 transition-colors duration-150 rounded-lg cursor-pointer focus:shadow-outline hover:bg-gray-300","children":["$","$L2",null,{"href":{"pathname":"/category","query":{"category":"report"}},"children":"report"}]}],["$","button","1",{"className":"h-8 px-3 m-1 text-xs border-2 border-gray-700 dark:border-gray-300 transition-colors duration-150 rounded-lg cursor-pointer focus:shadow-outline hover:bg-gray-300","children":["$","$L2",null,{"href":{"pathname":"/category","query":{"category":"redis"}},"children":"redis"}]}]]}],["$","div",null,{"className":"flex items-center justify-between mb-16","children":[["$","span",null,{"className":"text-sm","children":["$","a",null,{"href":"https://beenchangseo.github.io/","children":"beenchangseo"}]}],["$","span",null,{"className":"ml-1 mr-1","children":"·"}],["$","span",null,{"className":"text-sm font-medium text-gray-500","children":"2024년 3월 15일"}],["$","span",null,{"className":"flex items-center ml-auto","children":["$","a",null,{"href":"https://hits.seeyoufarm.com","children":["$","$L3",null,{"className":"mb-0 mt-0","src":"https://hits.seeyoufarm.com/api/count/incr/badge.svg?url=https%3A%2F%2Fbeenchangseo.github.io&count_bg=%234B4B4B&title_bg=%23929292&icon=tencentqq.svg&icon_color=%23E7E7E7&title=TODAY&edge_flat=false","alt":"Landscape picture","width":130,"height":20}]}]}]]}],[["$","h2",null,{"children":"문제 상황"}],"\n",["$","p",null,{"children":"거래소 마켓 데이터 처리 모듈에서 발생한 장애로 인해 서비스 전체가 중단되었습니다. 모듈의 pod 로그를 확인해 보니, 다음과 같은 에러 메시지와 함께 무한 재기동이 발생하고 있었습니다."}],"\n",["$","pre",null,{"children":["$","code",null,{"children":"Uahandeled promise rejection occured!\n[ErrorReply: EXECABORT Transaction discarded because of previous errors.]\n"}]}],"\n",["$","h2",null,{"children":"원인 분석"}],"\n",["$","p",null,{"children":[["$","strong",null,{"children":"EXECABORT Transaction discarded because of previous errors"}],"의 메시지는 실행된 ",["$","code",null,{"children":"exec"}]," 명령이 중단되었고, 이는 이전의 오류들로 인해 트랜잭션이 삭제되었다는 것을 의미합니다. 문제의 원인은 주로 다음 세 가지 중 하나일 가능성이 높습니다:"]}],"\n",["$","ol",null,{"children":["\n",["$","li",null,{"children":[["$","strong",null,{"children":"잘못된 명령 사용"}],": Transaction 중 잘못된 Redis 명령어 실행 후 ",["$","code",null,{"children":"exec"}],"이 호출된 경우."]}],"\n",["$","li",null,{"children":[["$","strong",null,{"children":"Lock 변경 시도"}],": ",["$","code",null,{"children":"watch"}]," 명령어로 lock이 설정된 key를 변경하려 한 경우."]}],"\n",["$","li",null,{"children":[["$","strong",null,{"children":"메모리 부족"}],": Redis 인스턴스의 메모리가 부족한 경우."]}],"\n"]}],"\n",["$","p",null,{"children":"최근 변경된 Redis 서비스 로직을 확인한 결과, 관련된 새로운 기능이 추가되거나 변경된 커밋은 없었습니다. 이는 메모리 부족 가능성을 높입니다."}],"\n",["$","p",null,{"children":"Redis 메모리 상태를 확인하기 위해 다음 명령어를 사용했습니다."}],"\n",["$","pre",null,{"children":["$","code",null,{"children":"redis-cli info | grep memory\n"}]}],"\n",["$","p",null,{"children":"결과적으로 메모리 부족 상태가 확인되었습니다. 최근에 변경된 대용량 벌크 메일 처리 로직이 메모리 소비를 크게 증가시킨 것으로 보입니다."}],"\n",["$","h2",null,{"children":"문제 해결"}],"\n",["$","h3",null,{"children":"임시 조치"}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":"처리되지 못한 job들을 추출하여 백업: 전송되지 않은 메일들을 나중에 재전송하기 위함입니다."}],"\n",["$","li",null,{"children":"관련 Redis key를 삭제하여 즉각적인 문제를 해결."}],"\n"]}],"\n",["$","h3",null,{"children":"영구 조치"}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":"AWS Redis 인스턴스의 용량을 증설."}],"\n",["$","li",null,{"children":"남은 벌크 메일을 처리."}],"\n"]}],"\n",["$","h3",null,{"children":"개선 사항"}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":"시스템이 고부하 상태일 때 자동으로 스케일 아웃할 수 있는 기능 추가 필요."}],"\n",["$","li",null,{"children":"알림 서비스 전용 Redis 분리"}],"\n"]}],"\n",["$","p",null,{"children":"이상, 이번 주말 출근의 원인이었던 장애 해결 포스팅 끝"}]]]}]}]],null],null]},["$","$L4",null,{"parallelRouterKey":"children","segmentPath":["children","blog","children","post","children","$5","children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L6",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","styles":null}],null]},["$","$L4",null,{"parallelRouterKey":"children","segmentPath":["children","blog","children","post","children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L6",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","styles":null}],null]},["$","$L4",null,{"parallelRouterKey":"children","segmentPath":["children","blog","children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L6",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","styles":null}],null]},[["$","html",null,{"lang":"en","className":"__className_36bd41","suppressHydrationWarning":true,"children":["$","body",null,{"children":["$","$L7",null,{"children":["$","$L8",null,{"children":["$","$9",null,{"children":[["$","$La",null,{}],["$","main",null,{"className":"transition duration-500 bg-white dark:bg-[#111111] text-black dark:text-white","children":["$","div",null,{"className":"max-w-screen-md flex flex-col px-10 m-auto","children":["$","$L4",null,{"parallelRouterKey":"children","segmentPath":["children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L6",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":[["$","title",null,{"children":"404: This page could not be found."}],["$","div",null,{"style":{"fontFamily":"system-ui,\"Segoe UI\",Roboto,Helvetica,Arial,sans-serif,\"Apple Color Emoji\",\"Segoe UI Emoji\"","height":"100vh","textAlign":"center","display":"flex","flexDirection":"column","alignItems":"center","justifyContent":"center"},"children":["$","div",null,{"children":[["$","style",null,{"dangerouslySetInnerHTML":{"__html":"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}"}}],["$","h1",null,{"className":"next-error-h1","style":{"display":"inline-block","margin":"0 20px 0 0","padding":"0 23px 0 0","fontSize":24,"fontWeight":500,"verticalAlign":"top","lineHeight":"49px"},"children":"404"}],["$","div",null,{"style":{"display":"inline-block"},"children":["$","h2",null,{"style":{"fontSize":14,"fontWeight":400,"lineHeight":"49px","margin":0},"children":"This page could not be found."}]}]]}]}]],"notFoundStyles":[],"styles":null}]}]}],["$","footer",null,{"className":"w-full font-mono flex flex-col justify-center items-center pt-10 pb-6 transition duration-500 bg-white dark:bg-[#111111] dark:text-white text-black","children":[["$","div",null,{"className":"flex justify-center gap-4 items-center pt-4 border-t-2 w-36","children":[["$","a",null,{"href":"beenchangseo@gmail.com","className":"hover:scale-110 transition-transform duration-500 hover:text-green-500 hover:fill-green-500 dark:fill-white dark:hover:fill-green-500","children":["$","svg",null,{"xmlns":"http://www.w3.org/2000/svg","width":"24","height":"24","viewBox":"0 0 24 24","children":["$","path",null,{"d":"M12 .02c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm6.99 6.98l-6.99 5.666-6.991-5.666h13.981zm.01 10h-14v-8.505l7 5.673 7-5.672v8.504z"}]}]}],["$","a",null,{"href":"https://github.com/beenchangseo","className":"hover:scale-110 transition-transform duration-500 hover:text-green-500 hover:fill-green-500 dark:fill-white dark:hover:fill-green-500","children":["$","svg",null,{"xmlns":"http://www.w3.org/2000/svg","width":"24","height":"24","viewBox":"0 0 24 24","children":["$","path",null,{"d":"M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"}]}]}]]}],["$","div",null,{"className":"text-sm mt-2","children":"Copyright © 2024 Changbeen seo"}],["$","div",null,{"className":"text-xs mt-2","children":"beenchangseo"}]]}]]}]}]}]}]}],null],null],[[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/0fa683c6ffcd2b7c.css","precedence":"next","crossOrigin":"$undefined"}]],"$Lb"]]]]
b:[["$","meta","0",{"name":"viewport","content":"width=device-width, initial-scale=1"}],["$","meta","1",{"charSet":"utf-8"}],["$","title","2",{"children":"Redis EXECABORT Transaction discarded because of previous errors 에러"}],["$","meta","3",{"name":"description","content":"redis 메모리 부족으로 발생한 EXECABORT Transaction discarded because of previous errors 문제를 해결하는 포스팅 입니다."}],["$","meta","4",{"name":"keywords","content":"redis, EXECABORT, Transaction discarded because of previous errors, redis memory error"}],["$","meta","5",{"property":"og:title","content":"Redis EXECABORT Transaction discarded because of previous errors 에러"}],["$","meta","6",{"property":"og:description","content":"redis 메모리 부족으로 발생한 EXECABORT Transaction discarded because of previous errors 문제를 해결하는 포스팅 입니다."}],["$","meta","7",{"property":"og:url","content":"https://beenchangseo.github.io/Redis_volum_error"}],["$","meta","8",{"property":"og:site_name","content":"Beenchangseo Blog"}],["$","meta","9",{"property":"og:locale","content":"ko_KR"}],["$","meta","10",{"property":"og:type","content":"article"}],["$","meta","11",{"property":"article:tag","content":"redis"}],["$","meta","12",{"property":"article:tag","content":"EXECABORT"}],["$","meta","13",{"property":"article:tag","content":"Transaction discarded because of previous errors"}],["$","meta","14",{"property":"article:tag","content":"redis memory error"}],["$","meta","15",{"name":"twitter:card","content":"summary"}],["$","meta","16",{"name":"twitter:creator","content":"beenchangseo"}],["$","meta","17",{"name":"twitter:title","content":"Redis EXECABORT Transaction discarded because of previous errors 에러"}],["$","meta","18",{"name":"twitter:description","content":"redis 메모리 부족으로 발생한 EXECABORT Transaction discarded because of previous errors 문제를 해결하는 포스팅 입니다."}],["$","meta","19",{"name":"next-size-adjust"}]]
1:null
